#include "watch.h"void  Handler(int signo){    //System Exit    printf("\r\nHandler:Goto Sleep mode\r\n");    EPD_Sleep();    DEV_ModuleExit();    exit(0);}int watch_init(watch_t *pstWatch){	bzero(pstWatch,sizeof(watch_t));	return 0;}void * key0_short_press(void *p_parameter){    printf("key0_short_press, para:%s\n", (char *)p_parameter);}void * key0_long_press(void *p_parameter){    printf("key0_long_press\n");	//UBYTE *BlackImage = (UBYTE *)p_parameter ;	watch_asr_t stWatchAsr;	watch_weather_t stWatchWeather;	asr_init(&stWatchAsr);	asr_server(&stWatchAsr);	weather_init(&stWatchWeather);	weather_server(&stWatchWeather,stWatchAsr.cszVtoT);	return 0;}void * key1_short_press(void *p_parameter){    printf("key1_short_press, para:%s\n", (char *)p_parameter);}void * key1_long_press(void *p_parameter){    printf("key1_long_press\n");	//UBYTE *BlackImage = (UBYTE *)p_parameter ;	watch_asr_t stWatchAsr;	asr_init(&stWatchAsr);	asr_server(&stWatchAsr);	watch_phone_call(stWatchAsr.cszVtoT);	return 0;}void * key2_short_press(void *p_parameter){    printf("key2_short_press, para:%s\n", (char *)p_parameter);}void * key2_long_press(void *p_parameter){    printf("key2_long_press\n");	//UBYTE *BlackImage = (UBYTE *)p_parameter ;		watch_t *pstWatch = (watch_t *)p_parameter;	watch_asr_t stWatchAsr;	asr_init(&stWatchAsr);	asr_server(&stWatchAsr);	if(pstWatch->stWatchMesg.iState == MESG_CONTENT){		strncpy(pstWatch->stWatchMesg.cszMesg,stWatchAsr.cszVtoT,strlen(stWatchAsr.cszVtoT));		pstWatch->stWatchMesg.iState = MESG_NAME;		printf("speak name!!!!\n");	}else if(pstWatch->stWatchMesg.iState == MESG_NAME){		strncpy(pstWatch->stWatchMesg.cszName,stWatchAsr.cszVtoT,strlen(stWatchAsr.cszVtoT));		watch_mesg_send(&pstWatch->stWatchMesg);		pstWatch->stWatchMesg.iState = MESG_CONTENT;		printf("speak content!!!!\n");	}	return 0;}int watch_exec(watch_t *pstWatch){		key_module_init();	key_sys_register(KEY0_SHORT_PRESS,key0_short_press,pstWatch);	key_sys_register(KEY0_LONG_PRESS,key0_long_press,pstWatch);	key_sys_register(KEY1_SHORT_PRESS,key1_short_press,pstWatch);	key_sys_register(KEY1_LONG_PRESS,key1_long_press,pstWatch);	key_sys_register(KEY2_SHORT_PRESS,key2_short_press,pstWatch);	key_sys_register(KEY2_LONG_PRESS,key2_long_press,pstWatch);	display_module_init();	 display_info_t st_display;	 st_display.iRefresh_Mode = PART_REFRESH;	 st_display.i_x_coordinate = 0;	 st_display.i_y_coordinate = 0;	 st_display.iDisplay_type = PICTURE;	 sprintf(st_display.szPath_text, "%s", "./pic/100x100.bmp");	enqueue_display(&st_display, PRIORITY_3);	while(1){		sleep(1);	}}